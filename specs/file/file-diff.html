<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>File Module -- Review Version</title><link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/base.css" /><style type="text/css">
code           { font-family: monospace; }

div.constraint,
div.issue,
div.note,
div.notice     { margin-left: 2em; }

ol.enumar      { list-style-type: decimal; }
ol.enumla      { list-style-type: lower-alpha; }
ol.enumlr      { list-style-type: lower-roman; }
ol.enumua      { list-style-type: upper-alpha; }
ol.enumur      { list-style-type: upper-roman; }


div.exampleInner pre { margin-left: 1em;
                       margin-top: 0em; margin-bottom: 0em}
div.exampleOuter {border: 4px double gray;
                  margin: 0em; padding: 0em}
div.exampleInner { background-color: #d5dee3;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px; margin: 0em }
div.exampleWrapper { margin: 4px }
div.exampleHeader { font-weight: bold;
                    margin: 4px}

            div.diff-add  { background-color: #FFFF99; }
            div.diff-del  { text-decoration: line-through; }
            div.diff-chg  { background-color: #99FF99; }
            div.diff-off  {  }

            span.diff-add { background-color: #FFFF99; }
            span.diff-del { text-decoration: line-through; }
            span.diff-chg { background-color: #99FF99; }
            span.diff-off {  }

            td.diff-add   { background-color: #FFFF99; }
            td.diff-del   { text-decoration: line-through }
            td.diff-chg   { background-color: #99FF99; }
            td.diff-off   {  }
         
       code.function { font-weight: bold; }
      code.type { font-style: italic; } body { background-image: url(http://expath.org/images/logo-candidate.png); } </style></head><body><div><p>The presentation of this document has been augmented to
            identify changes from a previous version. Three kinds of changes
            are highlighted: <span class="diff-add">new, added text</span>,
            <span class="diff-chg">changed text</span>, and
            <span class="diff-del">deleted text</span>.</p><hr /></div><p><a href="http://w3.org/"><img src="http://w3.org/Icons/w3c_home" alt="W3C" height="48" width="72" /></a></p><div class="head">
<h1><a name="title" id="title"></a>File Module</h1>
<h2><a name="w3c-doctype" id="w3c-doctype"></a>EXPath Proposed Module 03 December 2013</h2><dl><dt>This version:</dt><dd>
         <span class="diff-chg"><a href="http://expath.org/spec/file/20131203">http://expath.org/spec/file/20131203</a></span>
      </dd><dt>Latest version:</dt><dd>
         <a href="http://expath.org/spec/file">http://expath.org/spec/file</a>
      </dd><dt>Previous versions:</dt><dd>
         <span class="diff-add"><a href="http://expath.org/spec/file/20120614">http://expath.org/spec/file/20120614</a></span><br />
         <a href="http://expath.org/spec/file/20120517">http://expath.org/spec/file/20120517</a><br />
      </dd><dt>Editors:</dt><dd>Christian Grün, BaseX GmbH</dd><dd>Matthias Brantner, 28msec GmbH</dd><dt>Contributor:</dt><dd>Gabriel Petrovay, 28msec GmbH</dd></dl><p>This document is also available in these non-normative formats: <span class="diff-chg"><a href="http://expath.org/spec/file/20131203.xml">XML</a></span> and <span class="diff-chg"><a href="http://expath.org/spec/file/20131203/diff">Revision markup</a></span>.</p><p class="copyright">Copyright © 2010-201<span class="diff-chg"><span>3</span></span> Christian Grün, published by the <a href="http://w3.org/community/expath/">EXPath Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor
               License Agreement (CLA)</a>. A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is
            available.</p><p class="copyright">This specification was published by the <a href="http://www.w3.org/community/expath/">EXPath Community Group</a>. It is not a W3C Standard nor is it on the W3C
            Standards Track. Please note that under the <a href="http://www.w3.org/community/about/agreements/cla/">W3C Community Contributor
               License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.s
            Learn more about <a href="http://www.w3.org/community/">W3C Community and Business
               Groups</a>.</p></div><hr /><div>
<h2><a name="abstract" id="abstract"></a>Abstract</h2><p>This proposal provides a file system API for XPath. It defines extension functions to
            perform file system related operations such as listing, reading, or writing files or
            directories. It has been designed to be compatible with XQuery 1.0 and
            XSLT 2.0<span class="diff-add"><span>, as well as any other XPath 2.0 usage</span></span>.</p></div><div class="toc">
<h2><a name="contents" id="contents"></a>Table of Contents</h2><p class="toc">1 <a href="#status">Status of this document</a><br />
2 <a href="#intro">Introduction</a><br />
    2.1 <a href="#namespaces">Namespace conventions</a><br />
    2.2 <a href="#file-paths">File Paths <span class="diff-del">vs. URIs</span></a><br />
    2.3 <a href="#exec">Query Execution</a><br />
    2.4 <a href="#error">Error Management</a><br />
3 <a href="#props">File Properties</a><br />
    3.1 <a href="#pr.exists">file:exists</a><br />
    3.2 <a href="#pr.is-dir">file:is-dir</a><br />
    3.3 <a href="#pr.is-file">file:is-file</a><br />
    3.4 <a href="#pr.last-modified">file:last-modified</a><br />
    3.5 <a href="#pr.size">file:size</a><br />
4 <a href="#in-out">Input/Output</a><br />
    4.1 <a href="#fn.append">file:append</a><br />
    4.2 <a href="#fn.append-binary">file:append-binary</a><br />
    4.3 <a href="#fn.append-text">file:append-text</a><br />
    4.4 <a href="#fn.append-text-lines">file:append-text-lines</a><br />
    4.5 <a href="#fn.copy">file:copy</a><br />
    4.6 <a href="#fn.create-dir">file:create-dir</a><br />
    4.7 <a href="#fn.create-temp-dir">file:create-temp-dir</a><br />
    4.8 <a href="#fn.create-temp-file">file:create-temp-file</a><br />
    4.9 <a href="#fn.delete">file:delete</a><br />
    4.10 <a href="#fn.list">file:list</a><br />
    4.11 <a href="#fn.move">file:move</a><br />
    4.12 <a href="#fn.read-binary">file:read-binary</a><br />
    4.13 <a href="#fn.read-text">file:read-text</a><br />
    4.14 <a href="#fn.read-text-lines">file:read-text-lines</a><br />
    4.15 <a href="#fn.write">file:write</a><br />
    4.16 <a href="#fn.write-binary">file:write-binary</a><br />
    4.17 <a href="#fn.write-text">file:write-text</a><br />
    4.18 <a href="#fn.write-text-lines">file:write-text-lines</a><br />
5 <a href="#paths">Paths</a><br />
    5.1 <a href="#fn.name">file:name</a><br />
    5.2 <a href="#fn.parent">file:parent</a><br />
    5.3 <a href="#fn.base-name">file:base-name</a><br />
    5.4 <a href="#fn.dir-name">file:dir-name</a><br />
    5.5 <a href="#fn.path-to-native">file:path-to-native</a><br />
    5.6 <a href="#fn.path-to-uri">file:path-to-uri</a><br />
    5.7 <a href="#fn.resolve-path">file:resolve-path</a><br />
6 <a href="#sys-props">System Properties</a><br />
    6.1 <a href="#pr.dir-separator">file:dir-separator</a><br />
    6.2 <a href="#pr.line-separator">file:line-separator</a><br />
    6.3 <a href="#pr.path-separator">file:path-separator</a><br />
    6.4 <a href="#pr.temp-dir">file:temp-dir</a><br />
</p>
<h3><a name="appendices" id="appendices"></a>Appendices</h3><p class="toc">A <a href="#refs">References</a><br />
B <a href="#errors">Summary of Error Conditions</a><br />
</p></div><hr /><div class="body"><div class="diff-add"><div class="div1">
<h2><a name="status" id="status"></a>1 Status of this document</h2><p>This document is in a final draft stage. Comments are welcomed at <a href="mailto:public-expath@w3.org">public-expath@w3.org</a> mailing list (<a href="http://lists.w3.org/Archives/Public/public-expath/">archive</a>).</p></div></div><div class="div1">
<h2><a name="intro" id="intro"></a>2 Introduction</h2><div class="div2">
<h3><a name="namespaces" id="namespaces"></a>2.1 Namespace conventions</h3><p>The module defined by this document defines <span class="diff-del"><span>the</span></span> functions
               and <span class="diff-del"><span>variables</span></span> <span class="diff-add"><span>errors</span></span> in the
               namespace <code>http://expath.org/ns/file</code>. In this document, the
                  <code>file</code> prefix<span class="diff-del"><span>, when used,</span></span> is bound to this namespace URI.</p><p>The <code>output</code> prefix is bound to the namespace
               <code>http://www.w3.org/2010/xslt-xquery-serialization</code>. It is used
               to specify serialization parameters.</p><div class="diff-del"><p>Error codes are defined in the namespace <code>http://expath.org/ns/error</code>.
               In this document, the <code>err</code> prefix, when used,
               is bound to this namespace URI.</p></div></div><div class="div2">
<h3><a name="file-paths" id="file-paths"></a>2.2 File Paths <span class="diff-del"><span>vs. URIs</span></span></h3><p>All file paths are specified as strings, and are resolved against the current working
               directory. An implementation must accept absolute and relative UNIX/Linux and Windows
               paths as well as absolute file URIs. Some examples: </p><ul><li><p><code>C:\Test Dir\my file.xml</code>: An absolute path on Windows
                     platforms.</p></li><li><p><code>/Test Dir/my file.xml</code>: An absolute path on UNIX-based
                     platforms.</p></li><li><p><code>C:\\\Test Dir//\\my file.xml</code>: An absolute path on Windows
                     platforms that tolerates an arbitrary number of slashes and backslashes.</p></li><li><p><code>my file.xml</code>: A relative path, pointing to a file in the current
                     working directory.</p></li><li><p><code>file:///C:/Test%20Dir/my%20file.xml</code>: An absolute file URI on
                     Windows platforms.</p></li><li><p><code>file:///Test%20Dir/my%20file.xml</code>: An absolute path on UNIX-based
                     platforms.</p></li></ul><p>Before further processing, all paths <span class="diff-del"><span>must first be</span></span>
            <span class="diff-add"><span>are</span></span> normalized to an implementation-defined
               representation (which usually is the representation of the underlying operating system).</p><div class="diff-add"><p>If a function returns a string that refers to a directory,
               it will always be suffixed with the system-specific directory separator.</p></div><div class="diff-add"><p>The standard function <code>fn:static-base-uri</code> can be used to
               resolve file operations against the base URI:</p></div><div class="diff-add"><pre diff="add">let $filename := "input.txt"
let $dir := file:dir-name(static-base-uri())
let $path := concat($dir, $filename)
return file:read-text($path)</pre></div></div><div class="div2">
<h3><a name="exec" id="exec"></a>2.3 Query Execution</h3><p><span class="diff-del"><span>Functions on File Properties (Section 2) and Input/Output (Section 3) are</span></span>
               <span class="diff-add"><span>Some function are marked as</span></span>
               ·nondeterministic·, which means they are not guaranteed to perform the same operations
               and produce identical results from repeated calls. <span class="diff-del"><span>As such, a</span></span>
               <span class="diff-add"><span>A query</span></span> processor must ensure
               that these functions are not relocated or pre-evaluated and that its results are not
               cached when compiling and evaluating the query and serializing its results.</p></div><div class="div2">
<h3><a name="error" id="error"></a>2.4 Error Management</h3><p>Error conditions are identified by a code (a <code>QName</code>). When such an error
               condition is reached during the execution of the function, a dynamic error is thrown,
               with the corresponding error code (as if the standard XPath function
                  <code><span class="diff-add"><span>fn:</span></span>error</code> had been called).</p><p>Error codes are defined through the specification.
               <span class="diff-add"><span>The generic error
               <span class="diff-del"><a href="#">[errFILE9999]</a></span>
               <span class="diff-add"><a href="#errIE">[file:io-error]</a></span> with an appropriate message is raised for I/O faults,
               or for specific errors caused by the underlying platform or programming language.</span></span>
               <span class="diff-del"><span>If file operations raise
               additional, errors, which may be specific to the underlying platform or programming
               language, the generic error <span class="diff-del"><a href="#">[errFILE9999]</a></span>
               <span class="diff-add"><a href="#errIE">[file:io-error]</a></span> with an appropriate message is raised.</span></span></p><p>For a list of specific errors see the "Summary of Error Conditions" section of this
               document.</p></div></div><div class="div1">
<h2><a name="props" id="props"></a>3 File Properties</h2><div class="div2">
<h3><a name="pr.exists" id="pr.exists"></a>3.1 <code>file:exists</code></h3><div class="exampleInner"><pre>
<code class="function">file:exists</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:boolean</code></pre></div><p>Tests if
              <span class="diff-del"><span>a path/URI is already used in the file system.</span></span>
              <span class="diff-add"><span>the file or directory pointed by <code>$path</code> exists.</span></span></p><div class="diff-del"><p>The function returns <code>true()</code> if a file or a directory exists at the
               location pointed by <code>$path</code>.</p></div><div class="diff-add"><p>This function is ·nondeterministic·.</p></div></div><div class="div2">
<h3><a name="pr.is-dir" id="pr.is-dir"></a>3.2 <code>file:is-dir</code></h3><div class="exampleInner"><pre>
<code class="function">file:is-dir</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:boolean</code></pre></div><p>Tests if <code>$path</code> points to a directory. On UNIX-based systems the root and
               the volume roots are considered directories.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div></div><div class="div2">
<h3><a name="pr.is-file" id="pr.is-file"></a>3.3 <code>file:is-file</code></h3><div class="exampleInner"><pre>
<code class="function">file:is-file</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:boolean</code></pre></div><p>Tests if <code>$path</code> points to a file.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div></div><div class="div2">
<h3><a name="pr.last-modified" id="pr.last-modified"></a>3.4 <code>file:last-modified</code></h3><div class="exampleInner"><pre>
<code class="function">file:last-modified</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:dateTime</code></pre></div><p>Returns <span class="diff-del"><span><code>xs:dateTime</code> representing</span></span> the last modification time
            <span class="diff-add"><span>of a file or directory</span></span>.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0001]</a></span><span class="diff-add"><a href="#errNF">[file:not-found]</a></span> is raised if <code>$path</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="pr.size" id="pr.size"></a>3.5 <code>file:size</code></h3><div class="exampleInner"><pre>
<code class="function">file:size</code>($file as <code class="type">xs:string</code>) as <code class="type">xs:integer</code></pre></div><p>Returns the byte size of a file<span class="diff-del"><span> as integer</span></span><span class="diff-add"><span>,
            or the value <code>0</code> for directories.</span></span></p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0001]</a></span><span class="diff-add"><a href="#errNF">[file:not-found]</a></span> is raised if <code>$path</code> does not
                  exist.</div>
               <span class="diff-del"><div diff="del"><a href="#errID">[file:is-dir]</a> is raised if <code>$path</code> points to a
                  directory.</div></span>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div></div><div class="div1">
<h2><a name="in-out" id="in-out"></a>4 Input/Output</h2><div class="div2">
<h3><a name="fn.append" id="fn.append"></a>4.1 <code>file:append</code></h3><div class="exampleInner"><pre>
<code class="function">file:append</code>($file as <code class="type">xs:string</code>,
            $items as <code class="type">item()*</code>) as <code class="type">empty-sequence()</code>
<code class="function">file:append</code>($file as <code class="type">xs:string</code>,
            $items as <code class="type">item()*</code>,
            $params as <code class="type">element(output:serialization-parameters)</code>) as <code class="type">empty-sequence()</code></pre></div><p>Appends a sequence of items to a file. If the file pointed by <code>$file</code> does
               not exist, a new file will be created.</p><p><code>$params</code> controls the way the <code>$items</code> items are serialized.
               The semantics of <code>$params</code> is the same as for the
               <code>fn:serialize</code> function in <a href="#fo30">[XQuery and XPath Functions and Operators 3.0]</a>. This consists of an
               <code>output:serialization-parameters</code> element whose format is defined in
               <a href="#ser30">[XSLT and XQuery Serialization 3.0]</a>. In contrast to <span class="diff-chg"><span><code>fn:serialize,</code></span></span>, the encoding stage will not be
               skipped by this function.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$file</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.append-binary" id="fn.append-binary"></a>4.2 <code>file:append-binary</code></h3><div class="exampleInner"><pre>
<code class="function">file:append-binary</code>($file as <code class="type">xs:string</code>,
                   $value as <code class="type">xs:base64Binary</code>) as <code class="type">empty-sequence()</code></pre></div><p>Appends a Base64 item as binary to a file. If the file pointed by <code>$file</code>
               does not exist, a new file will be created.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$file</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.append-text" id="fn.append-text"></a>4.3 <code>file:append-text</code></h3><div class="exampleInner"><pre>
<code class="function">file:append-text</code>($file as <code class="type">xs:string</code>,
                 $value as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code>
<code class="function">file:append-text</code>($file as <code class="type">xs:string</code>,
                 $value as <code class="type">xs:string</code>,
                 $encoding as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code></pre></div><p>Appends a string to a file. If the file pointed by <code>$file</code> does not exist,
               a new file will be created.</p><p>The optional parameter <code>$encoding</code>, if not provided, is considered to be
                  <code>UTF-8</code>.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$file</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE0005]</a></span><span class="diff-add"><a href="#errUE">[file:unknown-encoding]</a></span> is raised if <code>$encoding</code> is invalid or
                  not supported by the implementation.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.append-text-lines" id="fn.append-text-lines"></a>4.4 <code>file:append-text-lines</code></h3><div class="exampleInner"><pre>
<code class="function">file:append-text-lines</code>($file as <code class="type">xs:string</code>,
                       $values as <code class="type">xs:string*</code>) as <code class="type">empty-sequence()</code>
<code class="function">file:append-text-lines</code>($file as <code class="type">xs:string</code>,
                       $lines as <code class="type">xs:string*</code>,
                       $encoding as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code></pre></div><p>Appends a sequence of strings to a file, each followed by the system-dependent
               newline character. If the file pointed by <code>$file</code> does not exist, a new
               file will be created.</p><p>The optional parameter <code>$encoding</code>, if not provided, is considered to be
                  <code>UTF-8</code>.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$file</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE0005]</a></span><span class="diff-add"><a href="#errUE">[file:unknown-encoding]</a></span> is raised if <code>$encoding</code> is invalid or
                  not supported by the implementation.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.copy" id="fn.copy"></a>4.5 <code>file:copy</code></h3><div class="exampleInner"><pre>
<code class="function">file:copy</code>($source as <code class="type">xs:string</code>,
          $target as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code></pre></div><p>Copies a file or a directory given a source and a target path/URI. The following
               cases may occur if <code>$source</code> points to a file:</p><ol type="a"><li> if <code>$target</code> does not exist, it will be created.</li><li> if <code>$target</code> is a file, it will be overwritten.</li><li> if <code>$target</code> is a directory, the file will be created in that
                  directory with the name of the source file. If a file already exists, it will be
                  overwritten.</li></ol><p>The following cases may occur if <code>$source</code> points to a directory:</p><ol type="a"><li> if <code>$target</code> does not exist, it will be created as directory, and all
                  files of the source directory are copied to this directory with their existing
                  local names.</li><li> if <code>$target</code> is a directory, <span class="diff-del"><span>all files are copied from the source</span></span>
                  <span class="diff-add"><span>the source directory with all its files will be copied</span></span>
                  into the target directory. If a file already exists, it will be overwritten.</li></ol><p>Other cases will raise one of the errors listed below.</p><p>The function returns the empty sequence if the operation is successful. If an error
               occurs during the operation, no rollback to the original state will be possible </p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0001]</a></span><span class="diff-add"><a href="#errNF">[file:not-found]</a></span> is raised if the <code>$source</code> path does not
                  exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0002]</a></span><span class="diff-add"><a href="#errE">[file:exists]</a></span> is raised if <code>$source</code> points to a
                  directory and <code>$target</code> points to an existing file.</div>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$source</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$source</code> points to a file
                  and <code>$target</code> points to a directory, in which a subdirectory exists
                  with the name of the source file.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.create-dir" id="fn.create-dir"></a>4.6 <code>file:create-dir</code></h3><div class="exampleInner"><pre>
<code class="function">file:create-dir</code>($dir as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code></pre></div><p>Creates a directory, or does nothing if the directory already exists. The operation
               will create all non-existing parent directories.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0002]</a></span><span class="diff-add"><a href="#errE">[file:exists]</a></span> is raised if the specified path, or any of its
                  parent directories, points to an existing file.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="diff-add"><div class="div2">
<h3><a name="fn.create-temp-dir" id="fn.create-temp-dir"></a>4.7 <code>file:create-temp-dir</code></h3><div class="exampleInner"><pre>
<code class="function">file:create-temp-dir</code>($prefix as <code class="type">xs:string</code>,
                     $suffix as <code class="type">xs:string</code>) as <code class="type">xs:string</code>
<code class="function">file:create-temp-dir</code>($prefix as <code class="type">xs:string</code>,
                     $suffix as <code class="type">xs:string</code>,
                     $dir as <code class="type">xs:string</code>) as <code class="type">xs:string</code></pre></div><p>Creates a temporary directory and all non-existing parent directories
                   and returns the full path to the created directory.</p><p>The temporary directory will not be automatically deleted after query execution.
                   It is guaranteed to not already exist when the function is called.</p><p>If <code>$dir</code> is not given, the directory will be created inside
                   the system-dependent default temporary-file directory.</p><p>This function is ·nondeterministic·.</p><p>
               <div><span class="diff-del"><a href="#">[errFILE0002]</a></span><span class="diff-add"><a href="#errE">[file:exists]</a></span> is raised if the specified directory does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div></div><div class="diff-add"><div class="div2">
<h3><a name="fn.create-temp-file" id="fn.create-temp-file"></a>4.8 <code>file:create-temp-file</code></h3><div class="exampleInner"><pre>
<code class="function">file:create-temp-file</code>($prefix as <code class="type">xs:string</code>,
                      $suffix as <code class="type">xs:string</code>) as <code class="type">xs:string</code>
<code class="function">file:create-temp-file</code>($prefix as <code class="type">xs:string</code>,
                      $suffix as <code class="type">xs:string</code>,
                      $dir as <code class="type">xs:string</code>) as <code class="type">xs:string</code></pre></div><p>Creates a temporary file and all non-existing parent directories and
                   returns the full path to the created file.</p><p>The temporary file will not be automatically deleted after query execution.
                   It is guaranteed to not already exist when the function is called.</p><p>If <code>$dir</code> is not given, the directory will be created inside
                   the system-dependent default temporary-file directory.</p><p>This function is ·nondeterministic·.</p><p>
               <div><span class="diff-del"><a href="#">[errFILE0002]</a></span><span class="diff-add"><a href="#errE">[file:exists]</a></span> is raised if the specified directory does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div></div><div class="div2">
<h3><a name="fn.delete" id="fn.delete"></a>4.9 <code>file:delete</code></h3><div class="exampleInner"><pre>
<code class="function">file:delete</code>($path as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code>
<code class="function">file:delete</code>($path as <code class="type">xs:string</code>,
            $recursive as <code class="type">xs:boolean</code>) as <code class="type">empty-sequence()</code></pre></div><p>Deletes a file or a directory from the file system.</p><p>If the optional parameter <code>$recursive</code> is set to <code>true()</code>,
               sub-directories will be deleted as well.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0001]</a></span><span class="diff-add"><a href="#errNF">[file:not-found]</a></span> is raised if <code>$path</code> does not
                  exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  non-empty directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.list" id="fn.list"></a>4.10 <code>file:list</code></h3><div class="exampleInner"><pre>
<code class="function">file:list</code>($dir as <code class="type">xs:string</code>) as <code class="type">xs:string*</code>
<code class="function">file:list</code>($dir as <code class="type">xs:string</code>,
          $recursive as <code class="type">xs:boolean</code>) as <code class="type">xs:string*</code>
<code class="function">file:list</code>($dir as <code class="type">xs:string</code>,
          $recursive as <code class="type">xs:boolean</code>,
          $pattern as <code class="type">xs:string</code>) as <code class="type">xs:string*</code></pre></div><p>Lists all files and directories in a given directory. The order of the items in the
               resulting sequence is not defined. The "." and ".." items are never returned. The
               returned paths are relative to the provided directory <code>$dir</code>.</p><p>If the optional parameter <code>$recursive</code> is set to <code>true()</code>, all
               directories and files will be returned that are found while recursively traversing
               the given directory.</p><p>The optional <code>$pattern</code> parameter defines a name pattern in the glob
               syntax. If this is provided, only the paths of the files and directories whose names
               are matching the pattern will be returned.</p><p>An implementation must support at least the following glob syntax for the pattern: <ul><li><code>*</code> for matching any number of unknown characters and</li><li><code>?</code> for matching one unknown character.</li></ul>
            </p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised <code>$dir</code> does not point to an
                  existing directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.move" id="fn.move"></a>4.11 <code>file:move</code></h3><div class="exampleInner"><pre>
<code class="function">file:move</code>($source as <code class="type">xs:string</code>,
          $target as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code></pre></div><p>Moves a file or a directory given a source and a target path/URI. The following cases
               may occur if <code>$source</code> points to a file:</p><ol type="a"><li> if <code>$target</code> does not exist, it will be created.</li><li> if <code>$target</code> is a file, it will be overwritten.</li><li> if <code>$target</code> is a directory, the file will be created in that
                  directory with the name of the source file. If a file already exists, it will be
                  overwritten.</li></ol><p>The following cases may occur if <code>$source</code> points to a directory:</p><ol type="a"><li> if <code>$target</code> does not exist, it will be created as directory, and all
                  files of the source directory are moved to this directory with their existing
                  local names.</li><li> if <code>$target</code> is a directory, <span class="diff-del"><span>all files are moved from the source</span></span>
                  <span class="diff-add"><span>the source directory with all its files will be moved</span></span>
                  into the target directory. If a file already exists, it will be overwritten.</li></ol><p>Other cases will raise one of the errors listed below.</p><p>The function returns the empty sequence if the operation is successful. If an error
               occurs during the operation, no rollback to the original state will be possible </p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0001]</a></span><span class="diff-add"><a href="#errNF">[file:not-found]</a></span> is raised if the <code>$source</code> path does not
                  exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0002]</a></span><span class="diff-add"><a href="#errE">[file:exists]</a></span> is raised if <code>$source</code> points to a
                  directory and <code>$target</code> points to an existing file.</div>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$source</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$source</code> points to a file
                  and <code>$target</code> points to a directory, in which a subdirectory exists
                  with the name of the source file.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.read-binary" id="fn.read-binary"></a>4.12 <code>file:read-binary</code></h3><div class="exampleInner"><pre>
<code class="function">file:read-binary</code>($file as <code class="type">xs:string</code>) as <code class="type">xs:base64Binary</code>
<code class="function">file:read-binary</code>($file as <code class="type">xs:string</code>,
                 $offset as <code class="type">xs:integer</code>) as <code class="type">xs:base64Binary</code>
<code class="function">file:read-binary</code>($file as <code class="type">xs:string</code>,
                 $offset as <code class="type">xs:integer</code>,
                 $length as <code class="type">xs:integer</code>) as <code class="type">xs:base64Binary</code></pre></div><p>Returns the content of a file in its Base64 representation.</p><div class="diff-add"><p>The optional parameters <code>$offset</code> and <code>$length</code> can be
               used to read chunks of a file.</p></div><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0001]</a></span><span class="diff-add"><a href="#errNF">[file:not-found]</a></span> is raised if <code>$file</code> does not
                  exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <span class="diff-add"><div diff="add"><span class="diff-del"><a href="#">[errFILE0006]</a></span><span class="diff-add"><a href="#errOOR">[file:out-of-range]</a></span> is raised if <code>$offset</code> or
                  <code>$length</code> is negative, or if the chosen values would exceed the file bounds.</div></span>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.read-text" id="fn.read-text"></a>4.13 <code>file:read-text</code></h3><div class="exampleInner"><pre>
<code class="function">file:read-text</code>($file as <code class="type">xs:string</code>) as <code class="type">xs:string</code>
<code class="function">file:read-text</code>($file as <code class="type">xs:string</code>,
               $encoding as <code class="type">xs:string</code>) as <code class="type">xs:string</code></pre></div><p>Returns the content of a file in its string representation.</p><p>The optional parameter <code>$encoding</code>, if not provided, is considered to be
                  <code>UTF-8</code>.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0001]</a></span><span class="diff-add"><a href="#errNF">[file:not-found]</a></span> is raised if <code>$file</code> does not
                  exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE0005]</a></span><span class="diff-add"><a href="#errUE">[file:unknown-encoding]</a></span> is raised if <code>$encoding</code> is invalid or
                  not supported by the implementation.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.read-text-lines" id="fn.read-text-lines"></a>4.14 <code>file:read-text-lines</code></h3><div class="exampleInner"><pre>
<code class="function">file:read-text-lines</code>($file as <code class="type">xs:string</code>) as <code class="type">xs:string*</code>
<code class="function">file:read-text-lines</code>($file as <code class="type">xs:string</code>,
                     $encoding as <code class="type">xs:string</code>) as <code class="type">xs:string*</code></pre></div><p>Returns the contents of a file as a sequence of strings, separated at newline
               boundaries.</p><p>The optional parameter <code>$encoding</code>, if not provided, is considered to be
                  <code>UTF-8</code>.</p><p>The newline handling is the same as for the <code>fn:unparsed-text-lines</code>
               function in <a href="#fo30">[XQuery and XPath Functions and Operators 3.0]</a>.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0001]</a></span><span class="diff-add"><a href="#errNF">[file:not-found]</a></span> is raised if <code>$file</code> does not
                  exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE0005]</a></span><span class="diff-add"><a href="#errUE">[file:unknown-encoding]</a></span> is raised if <code>$encoding</code> is invalid or
                  not supported by the implementation.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.write" id="fn.write"></a>4.15 <code>file:write</code></h3><div class="exampleInner"><pre>
<code class="function">file:write</code>($file as <code class="type">xs:string</code>,
           $items as <code class="type">item()*</code>) as <code class="type">empty-sequence()</code>
<code class="function">file:write</code>($file as <code class="type">xs:string</code>,
           $items as <code class="type">item()*</code>,
           $params as <code class="type">element(output:serialization-parameters)</code>) as <code class="type">empty-sequence()</code></pre></div><p>Writes a sequence of items to a file.
               If <code>$file</code> already exists, it will be overwritten<span class="diff-add"><span>; otherwise, it will be created.</span></span></p><p><code>$params</code> controls the way the <code>$items</code> items are serialized.
               The semantics of <code>$params</code> is the same as for the
                  <code>fn:serialize</code> function in <a href="#fo30">[XQuery and XPath Functions and Operators 3.0]</a>. This consists of an
                  <code>output:serialization-parameters</code> element whose format is defined in
                  <a href="#ser30">[XSLT and XQuery Serialization 3.0]</a>. In contrast to fn:serialize, the encoding stage will not be
               skipped by this function.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$file</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.write-binary" id="fn.write-binary"></a>4.16 <code>file:write-binary</code></h3><div class="exampleInner"><pre>
<code class="function">file:write-binary</code>($file as <code class="type">xs:string</code>,
                  $value as <code class="type">xs:base64Binary</code>) as <code class="type">empty-sequence()</code>
<code class="function">file:write-binary</code>($file as <code class="type">xs:string</code>,
                  $value as <code class="type">xs:base64Binary</code>,
                  $offset as <code class="type">xs:integer</code>) as <code class="type">empty-sequence()</code></pre></div><p>Writes a Base64 item as binary to a file. If <code>$file</code> already exists, it
               will be overwritten<span class="diff-add"><span>; otherwise, it will be created</span></span>.</p><div class="diff-add"><p>If the optional parameter <code>$offset</code> is specified, data will be written
               to this file position. An existing file may be resized by that operation.</p></div><p>The function returns the empty sequence if the operation is successful.</p><p>This function is ·nondeterministic·.</p><p>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$file</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <span class="diff-add"><div diff="add"><span class="diff-del"><a href="#">[errFILE0006]</a></span><span class="diff-add"><a href="#errOOR">[file:out-of-range]</a></span> is raised if <code>$offset</code> is negative,
                  or if it exceeds the current file size.</div></span>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.write-text" id="fn.write-text"></a>4.17 <code>file:write-text</code></h3><div class="exampleInner"><pre>
<code class="function">file:write-text</code>($file as <code class="type">xs:string</code>,
                $value as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code>
<code class="function">file:write-text</code>($file as <code class="type">xs:string</code>,
                $value as <code class="type">xs:string</code>,
                $encoding as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code></pre></div><p>Writes a strings to a file. If <code>$file</code> already exists, it will be
               overwritten.</p><p>The optional parameter <code>$encoding</code>, if not provided, is considered to be
                  <code>UTF-8</code>.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$file</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE0005]</a></span><span class="diff-add"><a href="#errUE">[file:unknown-encoding]</a></span> is raised if <code>$encoding</code> is invalid or
                  not supported by the implementation.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div><div class="div2">
<h3><a name="fn.write-text-lines" id="fn.write-text-lines"></a>4.18 <code>file:write-text-lines</code></h3><div class="exampleInner"><pre>
<code class="function">file:write-text-lines</code>($file as <code class="type">xs:string</code>,
                      $values as <code class="type">xs:string*</code>) as <code class="type">empty-sequence()</code>
<code class="function">file:write-text-lines</code>($file as <code class="type">xs:string</code>,
                      $values as <code class="type">xs:string*</code>,
                      $encoding as <code class="type">xs:string</code>) as <code class="type">empty-sequence()</code></pre></div><p>Writes a sequence of strings to a file, each followed by the system-dependent newline
               character. If <code>$file</code> already exists, it will be overwritten<span class="diff-add"><span>; otherwise, it will be created</span></span>.</p><p>The optional parameter <code>$encoding</code>, if not provided, is considered to be
                  <code>UTF-8</code>.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE0003]</a></span><span class="diff-add"><a href="#errND">[file:no-dir]</a></span> is raised if the parent directory of
                     <code>$file</code> does not exist.</div>
               <div><span class="diff-del"><a href="#">[errFILE0004]</a></span><span class="diff-add"><a href="#errID">[file:is-dir]</a></span> is raised if <code>$file</code> points to a
                  directory.</div>
               <div><span class="diff-del"><a href="#">[errFILE0005]</a></span><span class="diff-add"><a href="#errUE">[file:unknown-encoding]</a></span> is raised if <code>$encoding</code> is invalid or
                  not supported by the implementation.</div>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if any other error occurs.</div>
            </p></div></div><div class="div1">
<h2><a name="paths" id="paths"></a>5 Paths</h2><p>None of the functions in this section performs any check regarding the existence of the
            received or returned paths.</p><div class="diff-add"><div class="div2">
<h3><a name="fn.name" id="fn.name"></a>5.1 <code>file:name</code></h3><div class="exampleInner"><pre>
<code class="function">file:name</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:string</code></pre></div><p>Returns the name of a file or directory.</p><p>An empty string is returned if the path points to the root directory,
               or if it contains no directory separators.</p><p>This function is ·deterministic· (no path existence check is made).</p></div></div><div class="diff-add"><div class="div2">
<h3><a name="fn.parent" id="fn.parent"></a>5.2 <code>file:parent</code></h3><div class="exampleInner"><pre>
<code class="function">file:parent</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:string?</code></pre></div><p>Returns the parent directory of a file or directory.</p><p>An empty sequence is returned if the path points to a root directory,
               or if it contains no directory separators.</p><p>This function is ·deterministic· (no path existence check is made).</p></div></div><div class="diff-del"><div class="div2">
<h3><a name="fn.base-name" id="fn.base-name"></a>5.3 <code>file:base-name</code></h3><div class="exampleInner"><pre>
<code class="function">file:base-name</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:string</code>
<code class="function">file:base-name</code>($path as <code class="type">xs:string</code>,
               $suffix as <code class="type">xs:string</code>) as <code class="type">xs:string</code></pre></div><p>Returns the last component from <code>$path</code>, deleting any trailing directory
               separators. If <code>$path</code> consists entirely of directory separator, the empty
               string is returned. If <code>$path</code> is the empty string, the string
                  <code>"."</code> is returned, signifying the current working directory.</p><p>If <code>$suffix</code> is present, it will be trimmed from the end of the result.
               This can be used to eliminate file extensions.</p><p>No path existence check is made.</p></div></div><div class="diff-del"><div class="div2">
<h3><a name="fn.dir-name" id="fn.dir-name"></a>5.4 <code>file:dir-name</code></h3><div class="exampleInner"><pre>
<code class="function">file:dir-name</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:string</code></pre></div><p>This function returns a string denoting the parent directory of <code>$path</code>.
               <span class="diff-del"><span>Any trailing directory separators are not counted as part of the directory name. If
               the specified string is empty or contains no directory separators, <code>"."</code>
               is returned, signifying the current directory.</span></span>
               <span class="diff-add"><span>If the specified string is empty or contains no directory separators, it is replaced
               with a single dot (<code>.</code>), signifying the current directory.
               If the resulting string does not end with a directory separator, it will be suffixed
               with the system-dependent directory separator.</span></span></p><p>No path existence check is made.</p></div></div><div class="div2">
<h3><a name="fn.path-to-native" id="fn.path-to-native"></a>5.5 <code>file:path-to-native</code></h3><div class="exampleInner"><pre>
<code class="function">file:path-to-native</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:string</code></pre></div><p>Transforms a URI, an absolute path, or relative path to a canonical, system-dependent
               path representation. A canonical path is both absolute and unique and thus contains
               no redirections such as references to parent directories or symbolic links.</p><div class="diff-del"><p>No path existence check is made.</p></div><div class="diff-add"><p>If the resulting path points to a directory,
               it will be suffixed with the system-specific directory separator.</p></div><div class="diff-add"><p>This function is ·nondeterministic·.</p></div><p>
               <div><span class="diff-del"><a href="#">[errFILE9999]</a></span><span class="diff-add"><a href="#errIE">[file:io-error]</a></span> is raised if an error occurs while trying to obtain
                  the native path.</div>
            </p></div><div class="div2">
<h3><a name="fn.path-to-uri" id="fn.path-to-uri"></a>5.6 <code>file:path-to-uri</code></h3><div class="exampleInner"><pre>
<code class="function">file:path-to-uri</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:anyURI</code></pre></div><p>Transforms a file system path into a URI with the <code>file://</code> scheme. If the
               path is relative, it is first resolved against the current working directory.</p><div class="diff-del"><p>No path existence check is made.</p></div><div class="diff-add"><p>This function is ·deterministic· (no path existence check is made).</p></div></div><div class="div2">
<h3><a name="fn.resolve-path" id="fn.resolve-path"></a>5.7 <code>file:resolve-path</code></h3><div class="exampleInner"><pre>
<code class="function">file:resolve-path</code>($path as <code class="type">xs:string</code>) as <code class="type">xs:string</code></pre></div><p>Transforms a relative path into an absolute operating system path by resolving it
               against the current working directory.</p><div class="diff-del"><p>No path existence check is made.</p></div><div class="diff-add"><p>If the resulting path points to a directory,
               it will be suffixed with the system-specific directory separator.</p></div><div class="diff-add"><p>This function is ·nondeterministic·.</p></div></div></div><div class="div1">
<h2><a name="sys-props" id="sys-props"></a>6 System Properties</h2><div class="div2">
<h3><a name="pr.dir-separator" id="pr.dir-separator"></a>6.1 <code>file:dir-separator</code></h3><div class="exampleInner"><pre>
<code class="function">file:dir-separator</code>() as <code class="type">xs:string</code></pre></div><p>Returns the value of the operating system-specific directory separator, which usually
               is <code>/</code> on UNIX-based systems and <code>\</code> on Windows systems.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div></div><div class="div2">
<h3><a name="pr.line-separator" id="pr.line-separator"></a>6.2 <code>file:line-separator</code></h3><div class="exampleInner"><pre>
<code class="function">file:line-separator</code>() as <code class="type">xs:string</code></pre></div><p>Returns the value of the operating system-specific line separator, which usually is
                  <code>&amp;#10;</code> on UNIX-based systems, <code>&amp;#13;&amp;#10;</code> on
               Windows systems and <code>&amp;#13;</code> on Mac systems.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div></div><div class="div2">
<h3><a name="pr.path-separator" id="pr.path-separator"></a>6.3 <code>file:path-separator</code></h3><div class="exampleInner"><pre>
<code class="function">file:path-separator</code>() as <code class="type">xs:string</code></pre></div><p>Returns the value of the operating system-specific path separator, which usually is
                  <code>:</code> on UNIX-based systems and <code>;</code> on Windows systems.</p><p>This function is ·nondeterministic·.</p></div><div class="diff-add"><div class="div2">
<h3><a name="pr.temp-dir" id="pr.temp-dir"></a>6.4 <code>file:temp-dir</code></h3><div class="exampleInner"><pre>
<code class="function">file:temp-dir</code>() as <code class="type">xs:string</code></pre></div><p>Returns the path to the default temporary-file directory of an operating system.</p><div class="diff-add"><p>This function is ·nondeterministic·.</p></div></div></div></div></div><div class="back"><div class="div1">
<h2><a name="refs" id="refs"></a>A References</h2><dl><dt class="label"><a name="ser30" id="ser30"></a>XSLT and XQuery Serialization 3.0</dt><dd>
               <a href="http://www.w3.org/TR/xslt-xquery-serialization-30/">XSLT and XQuery
                  Serialization 3.0</a>. Henry Zongaro. W3C Working Draft 14 December 2010.</dd><dt class="label"><a name="fo30" id="fo30"></a>XQuery and XPath Functions and Operators 3.0</dt><dd>
               <a href="http://www.w3.org/TR/xpath-functions-30/">XPath and XQuery Functions and
                  Operators 3.0</a>. Michael Kay. W3C Working Draft 14 December 2010.</dd></dl></div><div class="div1">
<h2><a name="errors" id="errors"></a>B Summary of Error Conditions</h2><dl><dt class="label"><a name="errNF" id="errNF"></a>file:not-found</dt><dd>The specified path does not exist.</dd><dt class="label"><a name="errE" id="errE"></a>file:exists</dt><dd>The specified path already exists.</dd><dt class="label"><a name="errND" id="errND"></a>file:no-dir</dt><dd>The specified path does not point to a directory.</dd><dt class="label"><a name="errID" id="errID"></a>file:is-dir</dt><dd>The specified path points to a directory.</dd><dt class="label"><a name="errUE" id="errUE"></a>file:unknown-encoding</dt><dd>The specified encoding is not supported.</dd><dt class="label"><a name="errOOR" id="errOOR"></a>file:out-of-range</dt><dd>The specified offset or length is negative,
               or the chosen values would exceed the file bounds.</dd><dt class="label"><a name="errIE" id="errIE"></a>file:io-error</dt><dd>A generic file system error occurred.</dd></dl></div></div><script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
         </script><script type="text/javascript">
            try {
               var pageTracker = _gat._getTracker("UA-5463082-2");
               pageTracker._trackPageview();
            } catch(err) {}
         </script></body></html>